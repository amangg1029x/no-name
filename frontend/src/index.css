@tailwind base;
@tailwind components;
@tailwind utilities;

@import url('https://fonts.googleapis.com/css2?family=DM+Mono:ital,wght@0,300;0,400;0,500;1,300&family=Instrument+Serif:ital@0;1&family=DM+Sans:wght@300;400;500;600&display=swap');

:root {
  --bg:        #0a0a0b;
  --surface:   #111113;
  --raised:    #1c1c1f;
  --border:    rgba(255,255,255,0.07);
  --border-md: rgba(255,255,255,0.11);
  --text:      #e8e8ea;
  --text-2:    #8b8b94;
  --text-3:    #44444e;
  --amber:     #d4a843;
  --slate:     #8b9cb0;
  --red:       #c0392b;
  --green:     #4a7c59;
  --sidebar-w: 540px;
}

*, *::before, *::after { box-sizing: border-box; }
html, body, #root { height: 100%; margin: 0; }

body {
  background: var(--bg);
  color: var(--text);
  font-family: 'DM Sans', sans-serif;
  font-size: 14px;
  line-height: 1.6;
  -webkit-font-smoothing: antialiased;
  overflow-x: hidden;
}

/* subtle noise */
body::after {
  content: '';
  position: fixed; inset: 0; pointer-events: none; z-index: 9999;
  opacity: 0.022;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='300'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.75' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='300' height='300' filter='url(%23n)'/%3E%3C/svg%3E");
}

::-webkit-scrollbar { width: 3px; height: 3px; }
::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.08); border-radius: 2px; }

/* Typography */
.font-serif { font-family: 'Instrument Serif', Georgia, serif; }
.font-mono  { font-family: 'DM Mono', monospace !important; }
.font-sans  { font-family: 'DM Sans', sans-serif; }

/* Cards */
.card        { background: var(--surface); border: 1px solid var(--border); border-radius: 10px; }
.card-raised { background: var(--raised); border: 1px solid var(--border-md); border-radius: 8px; }

/* Sidebar */
.sidebar {
  position: fixed; top: 0; right: 0; bottom: 0;
  width: var(--sidebar-w);
  background: var(--surface);
  border-left: 1px solid var(--border-md);
  z-index: 300;
  display: flex; flex-direction: column;
  transform: translateX(100%);
  transition: transform 0.38s cubic-bezier(0.32, 0.72, 0, 1);
  will-change: transform;
}
.sidebar.open { transform: translateX(0); box-shadow: -60px 0 120px rgba(0,0,0,0.7); }

.sidebar-backdrop {
  position: fixed; inset: 0; background: rgba(0,0,0,0.6);
  z-index: 299; opacity: 0; pointer-events: none;
  transition: opacity 0.38s;
}
.sidebar-backdrop.open { opacity: 1; pointer-events: all; }

/* Upload zone */
.upload-zone {
  border: 1px solid var(--border-md); border-radius: 12px;
  transition: border-color 0.2s, background 0.2s;
}
.upload-zone:hover     { border-color: rgba(255,255,255,0.18); }
.upload-zone.dragging  { border-color: var(--amber); background: rgba(212,168,67,0.03); }

/* Badges */
.badge {
  display: inline-flex; align-items: center;
  padding: 2px 7px; border-radius: 4px;
  font-family: 'DM Mono', monospace; font-size: 10.5px; letter-spacing: 0.04em;
}
.badge-high   { background: rgba(192,57,43,0.14);  color: #e06050; border: 1px solid rgba(192,57,43,0.22); }
.badge-medium { background: rgba(212,168,67,0.14); color: #d4a843; border: 1px solid rgba(212,168,67,0.22); }
.badge-low    { background: rgba(74,124,89,0.14);  color: #6aad82; border: 1px solid rgba(74,124,89,0.22); }
.badge-skip   { background: rgba(68,68,78,0.2);    color: #666670; border: 1px solid rgba(68,68,78,0.3); }
.badge-cycle  { background: rgba(192,57,43,0.12);  color: #c07868; border: 1px solid rgba(192,57,43,0.2); }
.badge-fan    { background: rgba(139,156,176,0.12);color: #8b9cb0; border: 1px solid rgba(139,156,176,0.2); }
.badge-shell  { background: rgba(212,168,67,0.12); color: #c49a30; border: 1px solid rgba(212,168,67,0.2); }
.badge-vel    { background: rgba(74,124,89,0.12);  color: #5a9470; border: 1px solid rgba(74,124,89,0.2); }

/* Table */
.data-table { width: 100%; border-collapse: collapse; }
.data-table th {
  font-family: 'DM Mono', monospace; font-size: 10px; font-weight: 500;
  letter-spacing: 0.09em; text-transform: uppercase; color: var(--text-3);
  padding: 10px 16px; text-align: left; border-bottom: 1px solid var(--border);
  white-space: nowrap;
}
.data-table td {
  padding: 10px 16px; border-bottom: 1px solid rgba(255,255,255,0.035);
  vertical-align: middle;
}
.data-table tr:last-child td { border-bottom: none; }
.data-table tbody tr { transition: background 0.12s; cursor: pointer; }
.data-table tbody tr:hover { background: rgba(255,255,255,0.022); }
.data-table tbody tr.selected { background: rgba(212,168,67,0.06); }

/* Heatmap */
.hm-cell {
  border-radius: 3px; transition: all 0.15s; cursor: pointer; position: relative;
}
.hm-cell:hover { filter: brightness(1.4); }

/* Cytoscape tooltip */
.cy-tooltip {
  position: fixed; z-index: 9999; pointer-events: none;
  background: var(--raised); border: 1px solid var(--border-md);
  border-radius: 8px; padding: 12px 14px; min-width: 195px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.6);
  transform: translate(14px, -50%);
  font-family: 'DM Mono', monospace; font-size: 12px;
}

/* Animations */
@keyframes fadeUp {
  from { opacity: 0; transform: translateY(10px); }
  to   { opacity: 1; transform: translateY(0); }
}
.fade-up { animation: fadeUp 0.35s ease forwards; }
.d1 { animation-delay: 0.05s; opacity: 0; }
.d2 { animation-delay: 0.1s;  opacity: 0; }
.d3 { animation-delay: 0.15s; opacity: 0; }
.d4 { animation-delay: 0.2s;  opacity: 0; }

/* Score bar */
@keyframes growWidth { from { width: 0; } to { width: var(--target-w); } }
.score-fill { animation: growWidth 0.7s cubic-bezier(0.4, 0, 0.2, 1) forwards; }

/* Progress */
@keyframes scanProgress { from { width: 0; } to { width: 100%; } }
.scan-bar { animation: scanProgress 2s ease forwards; }

/* Divider */
.divider { height: 1px; background: var(--border); }